---
title: 블로그 업데이트
author: haruair
type: post
date: 2024-03-08T08:26:09
lang: ko
slug: blog-update-2024-mar
tags:
  - 개발 이야기
  - 블로그
---

어쩌다보니 블로그 업데이트를 연례 행사처럼 치루고 있다.

그동안 [Gatsby][0]를 잘 사용하고 있었지만 걷어내기로 했다. netlify 인수 이후엔
업데이트 자체도 상당히 정체된 상황이다. 새 버전에 대한 이야기가 있긴 하지만
수많은 플러그인이 동시에 관리되고 업데이트 해왔던 그간의 방향성을 봤을 때 조금
의구심이 들 수 밖에 없는 상황이다. 거기에다 Gatsby Cloud도 접은 것 보면
사용자로서는 좀 김이 빠진다. 정말 좋아하는 프로젝트고 프로덕트였는데 프로덕트의
성숙도와는 달리 순식간에 불투명해져버린 상황이 많이 아쉽다.

react 기반의 정적 사이트 생성기를 계속 사용할까 찾아봤다. [Astro][1]가 요즘
유행이기도 하고 [Vercel][2] 제품도 사용해보고 싶긴 하지만... 1) 웹브라우저의
기본적인 사이클과 잘 맞지 않는 기분이 종종 들었고 (아무래도 웹사이트니까 SPA같은
느낌이 드는게 묘하게 어색한 그런 기분), 2) 마크다운에 마음대로 인라인 스크립트나
스타일을 넣는 일도 좀 불편한 기분이고, 3) 간단한 html을 넣으려고 이런 저런
컴포넌트를 오가야 하는 일도 조금 번거로웠다. 물론 react 문제 아니고 내가 구성한
방식의 문제겠지만서도.

다른 정적 생성기를 사용할까 찾아보다가 그냥 간단하게 만들기로 했다. 페이지네이션
없이 그냥 목록만 제공할 거니까, 복잡하게 생각하지 말고 그냥 생각 가는데로
간단하게 만들기로 했다.

그동안 [remark.js][3]를 gatsby 통해서 잘 사용해왔으니까 이젠 직접 사용하기만
하면 될 것 같았다. 이미 라우팅은 각각 마크다운 파일에 정의된 `frontmatter`를
사용해서 만들어내고 있었기 때문에 `frontmatter`만 읽어 처리할 수 있으면 되는
상황이었다. remark.js과 여러 플러그인 통해서 별 문제 없이 구현할 수 있었다. 사실
gatsby 대부분 마크다운과 관련된 플러그인은 remark.js의 플러그인을 랩핑한
것이라서, 좀 더 날 것의 형태로 사용할 수 있다는 것은 오히려 장점이었다.

템플릿도 별도 엔진을 사용할까 하다가도 새로운 템플릿 문법을 보고 짜는 것도
번거롭고 이미 리터럴을 잘 쓰고 있으니 간단하게 [템플릿 리터럴로 구현][4]했다.
페이지 컨텐츠는 라우팅과 분리했지만 템플릿은 라우팅을 기준으로 불러오게 해서
페이지마다 스타일을 바꾸기 쉽게 만들었다. 그 외에도 sitemap.xml, RSS 피드,
리다이렉션, 이미지 처리 등 필요한 요소도 추가했다.

아직 별도의 캐시를 넣은 것도 아닌데 2~3분 걸리던 빌드가 30초대로 내려왔다.
빌드 로그를 보면 빌드 자체는 금방인데 필드 환경을 불러오는 시간이 꽤 길었다.
netlify에서 cloudflare pages로 변경하고 싶은데 cloudflare pages는 빌드 시간
제한이 아니라 횟수 제한이라서 사이트가 좀 더 정리되면 그때 옮길 생각이다.

[0]: https://www.gatsbyjs.com/
[1]: https://astro.build/
[2]: https://vercel.com/
[3]: https://github.com/remarkjs/remark
[4]: /ko/post/template-function-using-template-literals-in-js/

